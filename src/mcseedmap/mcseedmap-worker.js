var Ci=Object.defineProperty;var Ri=(ur,or,vr)=>or in ur?Ci(ur,or,{enumerable:!0,configurable:!0,writable:!0,value:vr}):ur[or]=vr;var er=(ur,or,vr)=>Ri(ur,typeof or!="symbol"?or+"":or,vr);(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ur=Symbol("Comlink.proxy"),or=Symbol("Comlink.endpoint"),vr=Symbol("Comlink.releaseProxy"),Vr=Symbol("Comlink.finalizer"),_r=Symbol("Comlink.thrown"),ie=w=>typeof w=="object"&&w!==null||typeof w=="function",De={canHandle:w=>ie(w)&&w[ur],serialize(w){const{port1:y,port2:c}=new MessageChannel;return zr(w,y),[c,[c]]},deserialize(w){return w.start(),ze(w)}},We={canHandle:w=>ie(w)&&_r in w,serialize({value:w}){let y;return w instanceof Error?y={isError:!0,value:{message:w.message,name:w.name,stack:w.stack}}:y={isError:!1,value:w},[y,[]]},deserialize(w){throw w.isError?Object.assign(new Error(w.value.message),w.value):w.value}},ne=new Map([["proxy",De],["throw",We]]);function Me(w,y){for(const c of w)if(y===c||c==="*"||c instanceof RegExp&&c.test(y))return!0;return!1}function zr(w,y=globalThis,c=["*"]){y.addEventListener("message",function l(p){if(!p||!p.data)return;if(!Me(c,p.origin)){console.warn(`Invalid origin '${p.origin}' for comlink proxy`);return}const{id:U,type:x,path:A}=Object.assign({path:[]},p.data),V=(p.data.argumentList||[]).map(yr);let B;try{const N=A.slice(0,-1).reduce((r,e)=>r[e],w),R=A.reduce((r,e)=>r[e],w);switch(x){case"GET":B=R;break;case"SET":N[A.slice(-1)[0]]=yr(p.data.value),B=!0;break;case"APPLY":B=R.apply(N,V);break;case"CONSTRUCT":{const r=new R(...V);B=Ze(r)}break;case"ENDPOINT":{const{port1:r,port2:e}=new MessageChannel;zr(w,e),B=ue(r,[r])}break;case"RELEASE":B=void 0;break;default:return}}catch(N){B={value:N,[_r]:0}}Promise.resolve(B).catch(N=>({value:N,[_r]:0})).then(N=>{const[R,r]=$r(N);y.postMessage(Object.assign(Object.assign({},R),{id:U}),r),x==="RELEASE"&&(y.removeEventListener("message",l),ae(y),Vr in w&&typeof w[Vr]=="function"&&w[Vr]())}).catch(N=>{const[R,r]=$r({value:new TypeError("Unserializable return value"),[_r]:0});y.postMessage(Object.assign(Object.assign({},R),{id:U}),r)})}),y.start&&y.start()}function Ve(w){return w.constructor.name==="MessagePort"}function ae(w){Ve(w)&&w.close()}function ze(w,y){const c=new Map;return w.addEventListener("message",function(p){const{data:U}=p;if(!U||!U.id)return;const x=c.get(U.id);if(x)try{x(U)}finally{c.delete(U.id)}}),Hr(w,c,[],y)}function Ur(w){if(w)throw new Error("Proxy has been released and is not useable")}function se(w){return dr(w,new Map,{type:"RELEASE"}).then(()=>{ae(w)})}const Sr=new WeakMap,Pr="FinalizationRegistry"in globalThis&&new FinalizationRegistry(w=>{const y=(Sr.get(w)||0)-1;Sr.set(w,y),y===0&&se(w)});function He(w,y){const c=(Sr.get(y)||0)+1;Sr.set(y,c),Pr&&Pr.register(w,y,w)}function je(w){Pr&&Pr.unregister(w)}function Hr(w,y,c=[],l=function(){}){let p=!1;const U=new Proxy(l,{get(x,A){if(Ur(p),A===vr)return()=>{je(U),se(w),y.clear(),p=!0};if(A==="then"){if(c.length===0)return{then:()=>U};const V=dr(w,y,{type:"GET",path:c.map(B=>B.toString())}).then(yr);return V.then.bind(V)}return Hr(w,y,[...c,A])},set(x,A,V){Ur(p);const[B,N]=$r(V);return dr(w,y,{type:"SET",path:[...c,A].map(R=>R.toString()),value:B},N).then(yr)},apply(x,A,V){Ur(p);const B=c[c.length-1];if(B===or)return dr(w,y,{type:"ENDPOINT"}).then(yr);if(B==="bind")return Hr(w,y,c.slice(0,-1));const[N,R]=oe(V);return dr(w,y,{type:"APPLY",path:c.map(r=>r.toString()),argumentList:N},R).then(yr)},construct(x,A){Ur(p);const[V,B]=oe(A);return dr(w,y,{type:"CONSTRUCT",path:c.map(N=>N.toString()),argumentList:V},B).then(yr)}});return He(U,w),U}function qe(w){return Array.prototype.concat.apply([],w)}function oe(w){const y=w.map($r);return[y.map(c=>c[0]),qe(y.map(c=>c[1]))]}const he=new WeakMap;function ue(w,y){return he.set(w,y),w}function Ze(w){return Object.assign(w,{[ur]:!0})}function $r(w){for(const[y,c]of ne)if(c.canHandle(w)){const[l,p]=c.serialize(w);return[{type:"HANDLER",name:y,value:l},p]}return[{type:"RAW",value:w},he.get(w)||[]]}function yr(w){switch(w.type){case"HANDLER":return ne.get(w.name).deserialize(w.value);case"RAW":return w.value}}function dr(w,y,c,l){return new Promise(p=>{const U=Ge();y.set(U,p),w.start&&w.start(),w.postMessage(Object.assign({id:U},c),l)})}function Ge(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var jr=(w=>(w[w.None=0]="None",w[w.Simple=1]="Simple",w[w.Stepped=2]="Stepped",w))(jr||{}),le=(w=>(w[w.None=0]="None",w[w.Simple=1]="Simple",w))(le||{}),Ye=(()=>{var y;var w=typeof document<"u"?(y=document.currentScript)==null?void 0:y.src:void 0;return async function(c={}){var l,p=c,U,x,A=new Promise((n,i)=>{U=n,x=i}),V=typeof window=="object",B=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var N=Object.assign({},p),R=(n,i)=>{throw i},r="";function e(n){return p.locateFile?p.locateFile(n,r):r+n}var t,a;(V||B)&&(B?r=self.location.href:typeof document<"u"&&document.currentScript&&(r=document.currentScript.src),w&&(r=w),r.startsWith("blob:")?r="":r=r.slice(0,r.replace(/[?#].*/,"").lastIndexOf("/")+1),B&&(a=n=>{var i=new XMLHttpRequest;return i.open("GET",n,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}),t=async n=>{var i=await fetch(n,{credentials:"same-origin"});if(i.ok)return i.arrayBuffer();throw new Error(i.status+" : "+i.url)});var s=p.print||console.log.bind(console),u=p.printErr||console.error.bind(console);Object.assign(p,N),N=null,p.arguments&&p.arguments,p.thisProgram&&p.thisProgram;var f=p.wasmBinary,m,_=!1,C,P,D,k,T,v,h,S,W,z,H="data:application/octet-stream;base64,",q=n=>n.startsWith(H);function J(){var n=m.buffer;p.HEAP8=C=new Int8Array(n),p.HEAP16=D=new Int16Array(n),p.HEAPU8=P=new Uint8Array(n),p.HEAPU16=k=new Uint16Array(n),p.HEAP32=T=new Int32Array(n),p.HEAPU32=v=new Uint32Array(n),p.HEAPF32=h=new Float32Array(n),p.HEAPF64=z=new Float64Array(n),p.HEAP64=S=new BigInt64Array(n),p.HEAPU64=W=new BigUint64Array(n)}var j=[],Y=[],Z=[];function G(){if(p.preRun)for(typeof p.preRun=="function"&&(p.preRun=[p.preRun]);p.preRun.length;)at(p.preRun.shift());Gr(j)}function Q(){Gr(Y)}function tr(){if(p.postRun)for(typeof p.postRun=="function"&&(p.postRun=[p.postRun]);p.postRun.length;)ot(p.postRun.shift());Gr(Z)}function at(n){j.unshift(n)}function st(n){Y.unshift(n)}function ot(n){Z.unshift(n)}var pr=0,Tr=null;function ht(n){var i;pr++,(i=p.monitorRunDependencies)==null||i.call(p,pr)}function ut(n){var o;if(pr--,(o=p.monitorRunDependencies)==null||o.call(p,pr),pr==0&&Tr){var i=Tr;Tr=null,i()}}function qr(n){var o;(o=p.onAbort)==null||o.call(p,n),n="Aborted("+n+")",u(n),_=!0,n+=". Build with -sASSERTIONS for more info.";var i=new WebAssembly.RuntimeError(n);throw x(i),i}var Zr;function lt(){var n="mcseedmap.wasm";return q(n)?n:e(n)}function ft(n){if(n==Zr&&f)return new Uint8Array(f);if(a)return a(n);throw"both async and sync fetching of the wasm failed"}async function ct(n){if(!f)try{var i=await t(n);return new Uint8Array(i)}catch{}return ft(n)}async function gt(n,i){try{var o=await ct(n),g=await WebAssembly.instantiate(o,i);return g}catch(d){u(`failed to asynchronously prepare wasm: ${d}`),qr(d)}}async function yt(n,i,o){if(!n&&typeof WebAssembly.instantiateStreaming=="function"&&!q(i))try{var g=fetch(i,{credentials:"same-origin"}),d=await WebAssembly.instantiateStreaming(g,o);return d}catch(F){u(`wasm streaming compile failed: ${F}`),u("falling back to ArrayBuffer instantiation")}return gt(i,o)}function pt(){return{a:Si}}async function wt(){function n(F,E){return hr=F.exports,m=hr.w,J(),Ee=hr.B,st(hr.x),ut(),hr}ht();function i(F){return n(F.instance)}var o=pt();if(p.instantiateWasm)try{return p.instantiateWasm(o,n)}catch(F){u(`Module.instantiateWasm callback failed with error: ${F}`),x(F)}Zr??(Zr=lt());try{var g=await yt(f,Zr,o),d=i(g);return d}catch(F){return x(F),Promise.reject(F)}}class vt{constructor(i){er(this,"name","ExitStatus");this.message=`Program terminated with exit(${i})`,this.status=i}}var Gr=n=>{for(;n.length>0;)n.shift()(p)};p.noExitRuntime;var dt=()=>qr(""),Lr=n=>{if(n===null)return"null";var i=typeof n;return i==="object"||i==="array"||i==="function"?n.toString():""+n},bt=()=>{for(var n=new Array(256),i=0;i<256;++i)n[i]=String.fromCharCode(i);ye=n},ye,rr=n=>{for(var i="",o=n;P[o];)i+=ye[P[o++]];return i},br={},wr={},Nr={},mr,M=n=>{throw new mr(n)},pe,kr=n=>{throw new pe(n)},Er=(n,i,o)=>{n.forEach(b=>Nr[b]=i);function g(b){var I=o(b);I.length!==n.length&&kr("Mismatched type converter count");for(var $=0;$<n.length;++$)ir(n[$],I[$])}var d=new Array(i.length),F=[],E=0;i.forEach((b,I)=>{wr.hasOwnProperty(b)?d[I]=wr[b]:(F.push(b),br.hasOwnProperty(b)||(br[b]=[]),br[b].push(()=>{d[I]=wr[b],++E,E===F.length&&g(d)}))}),F.length===0&&g(d)};function mt(n,i,o={}){var g=i.name;if(n||M(`type "${g}" must have a positive integer typeid pointer`),wr.hasOwnProperty(n)){if(o.ignoreDuplicateRegistrations)return;M(`Cannot register type '${g}' twice`)}if(wr[n]=i,delete Nr[n],br.hasOwnProperty(n)){var d=br[n];delete br[n],d.forEach(F=>F())}}function ir(n,i,o={}){return mt(n,i,o)}var we=(n,i,o)=>{switch(i){case 1:return o?g=>C[g]:g=>P[g];case 2:return o?g=>D[g>>1]:g=>k[g>>1];case 4:return o?g=>T[g>>2]:g=>v[g>>2];case 8:return o?g=>S[g>>3]:g=>W[g>>3];default:throw new TypeError(`invalid integer width (${i}): ${n}`)}},Ft=(n,i,o,g,d)=>{i=rr(i);var F=i.indexOf("u")!=-1;ir(n,{name:i,fromWireType:E=>E,toWireType:function(E,b){if(typeof b!="bigint"&&typeof b!="number")throw new TypeError(`Cannot convert "${Lr(b)}" to ${this.name}`);return typeof b=="number"&&(b=BigInt(b)),b},argPackAdvance:ar,readValueFromPointer:we(i,o,!F),destructorFunction:null})},ar=8,Tt=(n,i,o,g)=>{i=rr(i),ir(n,{name:i,fromWireType:function(d){return!!d},toWireType:function(d,F){return F?o:g},argPackAdvance:ar,readValueFromPointer:function(d){return this.fromWireType(P[d])},destructorFunction:null})},Et=n=>({count:n.count,deleteScheduled:n.deleteScheduled,preservePointerOnDelete:n.preservePointerOnDelete,ptr:n.ptr,ptrType:n.ptrType,smartPtr:n.smartPtr,smartPtrType:n.smartPtrType}),Yr=n=>{function i(o){return o.$$.ptrType.registeredClass.name}M(i(n)+" instance already deleted")},Xr=!1,ve=n=>{},It=n=>{n.smartPtr?n.smartPtrType.rawDestructor(n.smartPtr):n.ptrType.registeredClass.rawDestructor(n.ptr)},de=n=>{n.count.value-=1;var i=n.count.value===0;i&&It(n)},be=(n,i,o)=>{if(i===o)return n;if(o.baseClass===void 0)return null;var g=be(n,i,o.baseClass);return g===null?null:o.downcast(g)},me={},xt={},At=(n,i)=>{for(i===void 0&&M("ptr should not be undefined");n.baseClass;)i=n.upcast(i),n=n.baseClass;return i},_t=(n,i)=>(i=At(n,i),xt[i]),Or=(n,i)=>{(!i.ptrType||!i.ptr)&&kr("makeClassHandle requires ptr and ptrType");var o=!!i.smartPtrType,g=!!i.smartPtr;return o!==g&&kr("Both smartPtrType and smartPtr must be specified"),i.count={value:1},Ir(Object.create(n,{$$:{value:i,writable:!0}}))};function Ut(n){var i=this.getPointee(n);if(!i)return this.destructor(n),null;var o=_t(this.registeredClass,i);if(o!==void 0){if(o.$$.count.value===0)return o.$$.ptr=i,o.$$.smartPtr=n,o.clone();var g=o.clone();return this.destructor(n),g}function d(){return this.isSmartPointer?Or(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:i,smartPtrType:this,smartPtr:n}):Or(this.registeredClass.instancePrototype,{ptrType:this,ptr:n})}var F=this.registeredClass.getActualType(i),E=me[F];if(!E)return d.call(this);var b;this.isConst?b=E.constPointerType:b=E.pointerType;var I=be(i,this.registeredClass,b.registeredClass);return I===null?d.call(this):this.isSmartPointer?Or(b.registeredClass.instancePrototype,{ptrType:b,ptr:I,smartPtrType:this,smartPtr:n}):Or(b.registeredClass.instancePrototype,{ptrType:b,ptr:I})}var Ir=n=>typeof FinalizationRegistry>"u"?(Ir=i=>i,n):(Xr=new FinalizationRegistry(i=>{de(i.$$)}),Ir=i=>{var o=i.$$,g=!!o.smartPtr;if(g){var d={$$:o};Xr.register(i,d,i)}return i},ve=i=>Xr.unregister(i),Ir(n)),St=()=>{Object.assign(Br.prototype,{isAliasOf(n){if(!(this instanceof Br)||!(n instanceof Br))return!1;var i=this.$$.ptrType.registeredClass,o=this.$$.ptr;n.$$=n.$$;for(var g=n.$$.ptrType.registeredClass,d=n.$$.ptr;i.baseClass;)o=i.upcast(o),i=i.baseClass;for(;g.baseClass;)d=g.upcast(d),g=g.baseClass;return i===g&&o===d},clone(){if(this.$$.ptr||Yr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var n=Ir(Object.create(Object.getPrototypeOf(this),{$$:{value:Et(this.$$)}}));return n.$$.count.value+=1,n.$$.deleteScheduled=!1,n},delete(){this.$$.ptr||Yr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&M("Object already scheduled for deletion"),ve(this),de(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Yr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&M("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function Br(){}var xr=(n,i)=>Object.defineProperty(i,"name",{value:n}),Fe=(n,i,o)=>{if(n[i].overloadTable===void 0){var g=n[i];n[i]=function(...d){return n[i].overloadTable.hasOwnProperty(d.length)||M(`Function '${o}' called with an invalid number of arguments (${d.length}) - expects one of (${n[i].overloadTable})!`),n[i].overloadTable[d.length].apply(this,d)},n[i].overloadTable=[],n[i].overloadTable[g.argCount]=g}},Te=(n,i,o)=>{p.hasOwnProperty(n)?(M(`Cannot register public name '${n}' twice`),Fe(p,n,n),p[n].overloadTable.hasOwnProperty(o)&&M(`Cannot register multiple overloads of a function with the same number of arguments (${o})!`),p[n].overloadTable[o]=i):(p[n]=i,p[n].argCount=o)},Pt=48,$t=57,Ct=n=>{n=n.replace(/[^a-zA-Z0-9_]/g,"$");var i=n.charCodeAt(0);return i>=Pt&&i<=$t?`_${n}`:n};function Rt(n,i,o,g,d,F,E,b){this.name=n,this.constructor=i,this.instancePrototype=o,this.rawDestructor=g,this.baseClass=d,this.getActualType=F,this.upcast=E,this.downcast=b,this.pureVirtualFunctions=[]}var Jr=(n,i,o)=>{for(;i!==o;)i.upcast||M(`Expected null or instance of ${o.name}, got an instance of ${i.name}`),n=i.upcast(n),i=i.baseClass;return n};function Lt(n,i){if(i===null)return this.isReference&&M(`null is not a valid ${this.name}`),0;i.$$||M(`Cannot pass "${Lr(i)}" as a ${this.name}`),i.$$.ptr||M(`Cannot pass deleted object as a pointer of type ${this.name}`);var o=i.$$.ptrType.registeredClass,g=Jr(i.$$.ptr,o,this.registeredClass);return g}function Nt(n,i){var o;if(i===null)return this.isReference&&M(`null is not a valid ${this.name}`),this.isSmartPointer?(o=this.rawConstructor(),n!==null&&n.push(this.rawDestructor,o),o):0;(!i||!i.$$)&&M(`Cannot pass "${Lr(i)}" as a ${this.name}`),i.$$.ptr||M(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&i.$$.ptrType.isConst&&M(`Cannot convert argument of type ${i.$$.smartPtrType?i.$$.smartPtrType.name:i.$$.ptrType.name} to parameter type ${this.name}`);var g=i.$$.ptrType.registeredClass;if(o=Jr(i.$$.ptr,g,this.registeredClass),this.isSmartPointer)switch(i.$$.smartPtr===void 0&&M("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:i.$$.smartPtrType===this?o=i.$$.smartPtr:M(`Cannot convert argument of type ${i.$$.smartPtrType?i.$$.smartPtrType.name:i.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:o=i.$$.smartPtr;break;case 2:if(i.$$.smartPtrType===this)o=i.$$.smartPtr;else{var d=i.clone();o=this.rawShare(o,Mr.toHandle(()=>d.delete())),n!==null&&n.push(this.rawDestructor,o)}break;default:M("Unsupporting sharing policy")}return o}function kt(n,i){if(i===null)return this.isReference&&M(`null is not a valid ${this.name}`),0;i.$$||M(`Cannot pass "${Lr(i)}" as a ${this.name}`),i.$$.ptr||M(`Cannot pass deleted object as a pointer of type ${this.name}`),i.$$.ptrType.isConst&&M(`Cannot convert argument of type ${i.$$.ptrType.name} to parameter type ${this.name}`);var o=i.$$.ptrType.registeredClass,g=Jr(i.$$.ptr,o,this.registeredClass);return g}function Dr(n){return this.fromWireType(v[n>>2])}var Ot=()=>{Object.assign(Wr.prototype,{getPointee(n){return this.rawGetPointee&&(n=this.rawGetPointee(n)),n},destructor(n){var i;(i=this.rawDestructor)==null||i.call(this,n)},argPackAdvance:ar,readValueFromPointer:Dr,fromWireType:Ut})};function Wr(n,i,o,g,d,F,E,b,I,$,L){this.name=n,this.registeredClass=i,this.isReference=o,this.isConst=g,this.isSmartPointer=d,this.pointeeType=F,this.sharingPolicy=E,this.rawGetPointee=b,this.rawConstructor=I,this.rawShare=$,this.rawDestructor=L,!d&&i.baseClass===void 0?g?(this.toWireType=Lt,this.destructorFunction=null):(this.toWireType=kt,this.destructorFunction=null):this.toWireType=Nt}var Bt=(n,i,o)=>{p.hasOwnProperty(n)||kr("Replacing nonexistent public symbol"),p[n].overloadTable!==void 0&&o!==void 0||(p[n]=i,p[n].argCount=o)},Ee,Dt=n=>Ee.get(n),Fr=(n,i)=>{n=rr(n);function o(){return Dt(i)}var g=o();return typeof g!="function"&&M(`unknown function pointer with signature ${n}: ${i}`),g},Wt=(n,i)=>{var o=xr(i,function(g){this.name=i,this.message=g;var d=new Error(g).stack;d!==void 0&&(this.stack=this.toString()+`
`+d.replace(/^Error(:[^\n]*)?\n/,""))});return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},o},Ie,xe=n=>{var i=Pi(n),o=rr(i);return fr(i),o},Qr=(n,i)=>{var o=[],g={};function d(F){if(!g[F]&&!wr[F]){if(Nr[F]){Nr[F].forEach(d);return}o.push(F),g[F]=!0}}throw i.forEach(d),new Ie(`${n}: `+o.map(xe).join([", "]))},Mt=(n,i,o,g,d,F,E,b,I,$,L,O,X)=>{L=rr(L),F=Fr(d,F),b&&(b=Fr(E,b)),$&&($=Fr(I,$)),X=Fr(O,X);var nr=Ct(L);Te(nr,function(){Qr(`Cannot construct ${L} due to unbound types`,[g])}),Er([n,i,o],g?[g]:[],K=>{var Oe;K=K[0];var cr,Ar;g?(cr=K.registeredClass,Ar=cr.instancePrototype):Ar=Br.prototype;var gr=xr(L,function(...te){if(Object.getPrototypeOf(this)!==ee)throw new mr("Use 'new' to construct "+L);if(sr.constructor_body===void 0)throw new mr(L+" has no accessible constructor");var Be=sr.constructor_body[te.length];if(Be===void 0)throw new mr(`Tried to invoke ctor of ${L} with invalid number of parameters (${te.length}) - expected (${Object.keys(sr.constructor_body).toString()}) parameters instead!`);return Be.apply(this,te)}),ee=Object.create(Ar,{constructor:{value:gr}});gr.prototype=ee;var sr=new Rt(L,gr,ee,X,cr,F,b,$);sr.baseClass&&((Oe=sr.baseClass).__derivedClasses??(Oe.__derivedClasses=[]),sr.baseClass.__derivedClasses.push(sr));var $i=new Wr(L,sr,!0,!1,!1),Ne=new Wr(L+"*",sr,!1,!1,!1),ke=new Wr(L+" const*",sr,!1,!0,!1);return me[n]={pointerType:Ne,constPointerType:ke},Bt(nr,gr),[$i,Ne,ke]})},Ae=(n,i)=>{for(var o=[],g=0;g<n;g++)o.push(v[i+g*4>>2]);return o},Vt=n=>{for(;n.length;){var i=n.pop(),o=n.pop();o(i)}};function _e(n){for(var i=1;i<n.length;++i)if(n[i]!==null&&n[i].destructorFunction===void 0)return!0;return!1}function zt(n,i){if(!(n instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof n} which is not a function`);var o=xr(n.name||"unknownFunctionName",function(){});o.prototype=n.prototype;var g=new o,d=n.apply(g,i);return d instanceof Object?d:g}function Ht(n,i,o,g){var d=_e(n),F=n.length-2,E=[],b=["fn"];i&&b.push("thisWired");for(var I=0;I<F;++I)E.push(`arg${I}`),b.push(`arg${I}Wired`);E=E.join(","),b=b.join(",");var $=`return function (${E}) {
`;d&&($+=`var destructors = [];
`);var L=d?"destructors":"null",O=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];i&&($+=`var thisWired = classParam['toWireType'](${L}, this);
`);for(var I=0;I<F;++I)$+=`var arg${I}Wired = argType${I}['toWireType'](${L}, arg${I});
`,O.push(`argType${I}`);if($+=(o||g?"var rv = ":"")+`invoker(${b});
`,d)$+=`runDestructors(destructors);
`;else for(var I=i?1:2;I<n.length;++I){var X=I===1?"thisWired":"arg"+(I-2)+"Wired";n[I].destructorFunction!==null&&($+=`${X}_dtor(${X});
`,O.push(`${X}_dtor`))}return o&&($+=`var ret = retType['fromWireType'](rv);
return ret;
`),$+=`}
`,[O,$]}function Ue(n,i,o,g,d,F){var E=i.length;E<2&&M("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var b=i[1]!==null&&o!==null,I=_e(i),$=i[0].name!=="void",L=[n,M,g,d,Vt,i[0],i[1]],O=0;O<E-2;++O)L.push(i[O+2]);if(!I)for(var O=b?1:2;O<i.length;++O)i[O].destructorFunction!==null&&L.push(i[O].destructorFunction);let[X,nr]=Ht(i,b,$,F);X.push(nr);var K=zt(Function,X)(...L);return xr(n,K)}var jt=(n,i,o,g,d,F)=>{var E=Ae(i,o);d=Fr(g,d),Er([],[n],b=>{b=b[0];var I=`constructor ${b.name}`;if(b.registeredClass.constructor_body===void 0&&(b.registeredClass.constructor_body=[]),b.registeredClass.constructor_body[i-1]!==void 0)throw new mr(`Cannot register multiple constructors with identical number of parameters (${i-1}) for class '${b.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return b.registeredClass.constructor_body[i-1]=()=>{Qr(`Cannot construct ${b.name} due to unbound types`,E)},Er([],E,$=>($.splice(1,0,null),b.registeredClass.constructor_body[i-1]=Ue(I,$,null,d,F),[])),[]})},qt=n=>{n=n.trim();const i=n.indexOf("(");return i===-1?n:n.slice(0,i)},Zt=(n,i,o,g,d,F,E,b,I,$)=>{var L=Ae(o,g);i=rr(i),i=qt(i),F=Fr(d,F),Er([],[n],O=>{O=O[0];var X=`${O.name}.${i}`;i.startsWith("@@")&&(i=Symbol[i.substring(2)]),b&&O.registeredClass.pureVirtualFunctions.push(i);function nr(){Qr(`Cannot call ${X} due to unbound types`,L)}var K=O.registeredClass.instancePrototype,cr=K[i];return cr===void 0||cr.overloadTable===void 0&&cr.className!==O.name&&cr.argCount===o-2?(nr.argCount=o-2,nr.className=O.name,K[i]=nr):(Fe(K,i,X),K[i].overloadTable[o-2]=nr),Er([],L,Ar=>{var gr=Ue(X,Ar,O,F,E,I);return K[i].overloadTable===void 0?(gr.argCount=o-2,K[i]=gr):K[i].overloadTable[o-2]=gr,[]}),[]})},Kr=[],lr=[],Se=n=>{n>9&&--lr[n+1]===0&&(lr[n]=void 0,Kr.push(n))},Gt=()=>lr.length/2-5-Kr.length,Yt=()=>{lr.push(0,1,void 0,1,null,1,!0,1,!1,1),p.count_emval_handles=Gt},Mr={toValue:n=>(n||M("Cannot use deleted val. handle = "+n),lr[n]),toHandle:n=>{switch(n){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const i=Kr.pop()||lr.length;return lr[i]=n,lr[i+1]=1,i}}}},Xt={name:"emscripten::val",fromWireType:n=>{var i=Mr.toValue(n);return Se(n),i},toWireType:(n,i)=>Mr.toHandle(i),argPackAdvance:ar,readValueFromPointer:Dr,destructorFunction:null},Jt=n=>ir(n,Xt),Qt=(n,i,o)=>{switch(i){case 1:return o?function(g){return this.fromWireType(C[g])}:function(g){return this.fromWireType(P[g])};case 2:return o?function(g){return this.fromWireType(D[g>>1])}:function(g){return this.fromWireType(k[g>>1])};case 4:return o?function(g){return this.fromWireType(T[g>>2])}:function(g){return this.fromWireType(v[g>>2])};default:throw new TypeError(`invalid integer width (${i}): ${n}`)}},Kt=(n,i,o,g)=>{i=rr(i);function d(){}d.values={},ir(n,{name:i,constructor:d,fromWireType:function(F){return this.constructor.values[F]},toWireType:(F,E)=>E.value,argPackAdvance:ar,readValueFromPointer:Qt(i,o,g),destructorFunction:null}),Te(i,d)},Pe=(n,i)=>{var o=wr[n];return o===void 0&&M(`${i} has unknown type ${xe(n)}`),o},ri=(n,i,o)=>{var g=Pe(n,"enum");i=rr(i);var d=g.constructor,F=Object.create(g.constructor.prototype,{value:{value:o},constructor:{value:xr(`${g.name}_${i}`,function(){})}});d.values[o]=F,d[i]=F},ei=(n,i)=>{switch(i){case 4:return function(o){return this.fromWireType(h[o>>2])};case 8:return function(o){return this.fromWireType(z[o>>3])};default:throw new TypeError(`invalid float width (${i}): ${n}`)}},ti=(n,i,o)=>{i=rr(i),ir(n,{name:i,fromWireType:g=>g,toWireType:(g,d)=>d,argPackAdvance:ar,readValueFromPointer:ei(i,o),destructorFunction:null})},ii=(n,i,o,g,d)=>{i=rr(i);var F=L=>L;if(g===0){var E=32-8*o;F=L=>L<<E>>>E}var b=i.includes("unsigned"),I=(L,O)=>{},$;b?$=function(L,O){return I(O,this.name),O>>>0}:$=function(L,O){return I(O,this.name),O},ir(n,{name:i,fromWireType:F,toWireType:$,argPackAdvance:ar,readValueFromPointer:we(i,o,g!==0),destructorFunction:null})},ni=(n,i,o)=>{var g=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],d=g[i];function F(E){var b=v[E>>2],I=v[E+4>>2];return new d(C.buffer,I,b)}o=rr(o),ir(n,{name:o,fromWireType:F,argPackAdvance:ar,readValueFromPointer:F},{ignoreDuplicateRegistrations:!0})},ai=(n,i,o,g)=>{if(!(g>0))return 0;for(var d=o,F=o+g-1,E=0;E<n.length;++E){var b=n.charCodeAt(E);if(b>=55296&&b<=57343){var I=n.charCodeAt(++E);b=65536+((b&1023)<<10)|I&1023}if(b<=127){if(o>=F)break;i[o++]=b}else if(b<=2047){if(o+1>=F)break;i[o++]=192|b>>6,i[o++]=128|b&63}else if(b<=65535){if(o+2>=F)break;i[o++]=224|b>>12,i[o++]=128|b>>6&63,i[o++]=128|b&63}else{if(o+3>=F)break;i[o++]=240|b>>18,i[o++]=128|b>>12&63,i[o++]=128|b>>6&63,i[o++]=128|b&63}}return i[o]=0,o-d},si=(n,i,o)=>ai(n,P,i,o),oi=n=>{for(var i=0,o=0;o<n.length;++o){var g=n.charCodeAt(o);g<=127?i++:g<=2047?i+=2:g>=55296&&g<=57343?(i+=4,++o):i+=3}return i},$e=typeof TextDecoder<"u"?new TextDecoder:void 0,Ce=(n,i=0,o=NaN)=>{for(var g=i+o,d=i;n[d]&&!(d>=g);)++d;if(d-i>16&&n.buffer&&$e)return $e.decode(n.subarray(i,d));for(var F="";i<d;){var E=n[i++];if(!(E&128)){F+=String.fromCharCode(E);continue}var b=n[i++]&63;if((E&224)==192){F+=String.fromCharCode((E&31)<<6|b);continue}var I=n[i++]&63;if((E&240)==224?E=(E&15)<<12|b<<6|I:E=(E&7)<<18|b<<12|I<<6|n[i++]&63,E<65536)F+=String.fromCharCode(E);else{var $=E-65536;F+=String.fromCharCode(55296|$>>10,56320|$&1023)}}return F},hi=(n,i)=>n?Ce(P,n,i):"",ui=(n,i)=>{i=rr(i),ir(n,{name:i,fromWireType(o){for(var g=v[o>>2],d=o+4,F,E,b=d,E=0;E<=g;++E){var I=d+E;if(E==g||P[I]==0){var $=I-b,L=hi(b,$);F===void 0?F=L:(F+="\0",F+=L),b=I+1}}return fr(o),F},toWireType(o,g){g instanceof ArrayBuffer&&(g=new Uint8Array(g));var d,F=typeof g=="string";F||g instanceof Uint8Array||g instanceof Uint8ClampedArray||g instanceof Int8Array||M("Cannot pass non-string to std::string"),F?d=oi(g):d=g.length;var E=Le(4+d+1),b=E+4;if(v[E>>2]=d,F)si(g,b,d+1);else if(F)for(var I=0;I<d;++I){var $=g.charCodeAt(I);$>255&&(fr(E),M("String has UTF-16 code units that do not fit in 8 bits")),P[b+I]=$}else for(var I=0;I<d;++I)P[b+I]=g[I];return o!==null&&o.push(fr,E),E},argPackAdvance:ar,readValueFromPointer:Dr,destructorFunction(o){fr(o)}})},Re=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,li=(n,i)=>{for(var o=n,g=o>>1,d=g+i/2;!(g>=d)&&k[g];)++g;if(o=g<<1,o-n>32&&Re)return Re.decode(P.subarray(n,o));for(var F="",E=0;!(E>=i/2);++E){var b=D[n+E*2>>1];if(b==0)break;F+=String.fromCharCode(b)}return F},fi=(n,i,o)=>{if(o??(o=2147483647),o<2)return 0;o-=2;for(var g=i,d=o<n.length*2?o/2:n.length,F=0;F<d;++F){var E=n.charCodeAt(F);D[i>>1]=E,i+=2}return D[i>>1]=0,i-g},ci=n=>n.length*2,gi=(n,i)=>{for(var o=0,g="";!(o>=i/4);){var d=T[n+o*4>>2];if(d==0)break;if(++o,d>=65536){var F=d-65536;g+=String.fromCharCode(55296|F>>10,56320|F&1023)}else g+=String.fromCharCode(d)}return g},yi=(n,i,o)=>{if(o??(o=2147483647),o<4)return 0;for(var g=i,d=g+o-4,F=0;F<n.length;++F){var E=n.charCodeAt(F);if(E>=55296&&E<=57343){var b=n.charCodeAt(++F);E=65536+((E&1023)<<10)|b&1023}if(T[i>>2]=E,i+=4,i+4>d)break}return T[i>>2]=0,i-g},pi=n=>{for(var i=0,o=0;o<n.length;++o){var g=n.charCodeAt(o);g>=55296&&g<=57343&&++o,i+=4}return i},wi=(n,i,o)=>{o=rr(o);var g,d,F,E;i===2?(g=li,d=fi,E=ci,F=b=>k[b>>1]):i===4&&(g=gi,d=yi,E=pi,F=b=>v[b>>2]),ir(n,{name:o,fromWireType:b=>{for(var I=v[b>>2],$,L=b+4,O=0;O<=I;++O){var X=b+4+O*i;if(O==I||F(X)==0){var nr=X-L,K=g(L,nr);$===void 0?$=K:($+="\0",$+=K),L=X+i}}return fr(b),$},toWireType:(b,I)=>{typeof I!="string"&&M(`Cannot pass non-string to C++ string type ${o}`);var $=E(I),L=Le(4+$+i);return v[L>>2]=$/i,d(I,L+4,$+i),b!==null&&b.push(fr,L),L},argPackAdvance:ar,readValueFromPointer:Dr,destructorFunction(b){fr(b)}})},vi=(n,i)=>{i=rr(i),ir(n,{isVoid:!0,name:i,argPackAdvance:0,fromWireType:()=>{},toWireType:(o,g)=>{}})},di=(n,i)=>{n=Pe(n,"_emval_take_value");var o=n.readValueFromPointer(i);return Mr.toHandle(o)},bi=n=>{qr("OOM")},mi=n=>{P.length,bi()},Fi=n=>{R(n,new vt(n))},Ti=(n,i)=>{Fi(n)},Ei=Ti,Ii=n=>52;function xi(n,i,o,g){return 70}var Ai=[null,[],[]],_i=(n,i)=>{var o=Ai[n];i===0||i===10?((n===1?s:u)(Ce(o)),o.length=0):o.push(i)},Ui=(n,i,o,g)=>{for(var d=0,F=0;F<o;F++){var E=v[i>>2],b=v[i+4>>2];i+=8;for(var I=0;I<b;I++)_i(n,P[E+I]);d+=b}return v[g>>2]=d,0};bt(),mr=p.BindingError=class extends Error{constructor(i){super(i),this.name="BindingError"}},pe=p.InternalError=class extends Error{constructor(i){super(i),this.name="InternalError"}},St(),Ot(),Ie=p.UnboundTypeError=Wt(Error,"UnboundTypeError"),Yt();var Si={n:dt,h:Ft,l:Tt,p:Mt,u:jt,c:Zt,v:Jt,j:Kt,e:ri,g:ti,d:ii,a:ni,k:ui,f:wi,m:vi,t:Se,s:di,o:mi,b:Ei,r:Ii,q:xi,i:Ui},hr=await wt();hr.x;var Pi=hr.y,fr=hr.z,Le=hr.A;function re(){if(pr>0){Tr=re;return}if(G(),pr>0){Tr=re;return}function n(){var i;p.calledRun=!0,!_&&(Q(),U(p),(i=p.onRuntimeInitialized)==null||i.call(p),tr())}p.setStatus?(p.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>p.setStatus(""),1),n()},1)):n()}if(p.preInit)for(typeof p.preInit=="function"&&(p.preInit=[p.preInit]);p.preInit.length>0;)p.preInit.pop()();return re(),l=A,l}})();function Xe(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function fe(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cr={exports:{}},Rr={exports:{}},Je=Rr.exports,ce;function Qe(){return ce||(ce=1,function(w){/**
 * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/long.js for details
 */(function(y,c){typeof fe=="function"&&w&&w.exports?w.exports=c():(y.dcodeIO=y.dcodeIO||{}).Long=c()})(Je,function(){function y(v,h,S){this.low=v|0,this.high=h|0,this.unsigned=!!S}y.prototype.__isLong__,Object.defineProperty(y.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1});function c(v){return(v&&v.__isLong__)===!0}y.isLong=c;var l={},p={};function U(v,h){var S,W,z;return h?(v>>>=0,(z=0<=v&&v<256)&&(W=p[v],W)?W:(S=A(v,(v|0)<0?-1:0,!0),z&&(p[v]=S),S)):(v|=0,(z=-128<=v&&v<128)&&(W=l[v],W)?W:(S=A(v,v<0?-1:0,!1),z&&(l[v]=S),S))}y.fromInt=U;function x(v,h){if(isNaN(v)||!isFinite(v))return h?f:u;if(h){if(v<0)return f;if(v>=t)return D}else{if(v<=-9223372036854776e3)return k;if(v+1>=a)return P}return v<0?x(-v,h).neg():A(v%e|0,v/e|0,h)}y.fromNumber=x;function A(v,h,S){return new y(v,h,S)}y.fromBits=A;var V=Math.pow;function B(v,h,S){if(v.length===0)throw Error("empty string");if(v==="NaN"||v==="Infinity"||v==="+Infinity"||v==="-Infinity")return u;if(typeof h=="number"?(S=h,h=!1):h=!!h,S=S||10,S<2||36<S)throw RangeError("radix");var W;if((W=v.indexOf("-"))>0)throw Error("interior hyphen");if(W===0)return B(v.substring(1),h,S).neg();for(var z=x(V(S,8)),H=u,q=0;q<v.length;q+=8){var J=Math.min(8,v.length-q),j=parseInt(v.substring(q,q+J),S);if(J<8){var Y=x(V(S,J));H=H.mul(Y).add(x(j))}else H=H.mul(z),H=H.add(x(j))}return H.unsigned=h,H}y.fromString=B;function N(v){return v instanceof y?v:typeof v=="number"?x(v):typeof v=="string"?B(v):A(v.low,v.high,v.unsigned)}y.fromValue=N;var R=65536,r=1<<24,e=R*R,t=e*e,a=t/2,s=U(r),u=U(0);y.ZERO=u;var f=U(0,!0);y.UZERO=f;var m=U(1);y.ONE=m;var _=U(1,!0);y.UONE=_;var C=U(-1);y.NEG_ONE=C;var P=A(-1,2147483647,!1);y.MAX_VALUE=P;var D=A(-1,-1,!0);y.MAX_UNSIGNED_VALUE=D;var k=A(0,-2147483648,!1);y.MIN_VALUE=k;var T=y.prototype;return T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*e+(this.low>>>0):this.high*e+(this.low>>>0)},T.toString=function(h){if(h=h||10,h<2||36<h)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(k)){var S=x(h),W=this.div(S),z=W.mul(S).sub(this);return W.toString(h)+z.toInt().toString(h)}else return"-"+this.neg().toString(h);for(var H=x(V(h,6),this.unsigned),q=this,J="";;){var j=q.div(H),Y=q.sub(j.mul(H)).toInt()>>>0,Z=Y.toString(h);if(q=j,q.isZero())return Z+J;for(;Z.length<6;)Z="0"+Z;J=""+Z+J}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var h=this.high!=0?this.high:this.low,S=31;S>0&&!(h&1<<S);S--);return this.high!=0?S+33:S+1},T.isZero=function(){return this.high===0&&this.low===0},T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return(this.low&1)===1},T.isEven=function(){return(this.low&1)===0},T.equals=function(h){return c(h)||(h=N(h)),this.unsigned!==h.unsigned&&this.high>>>31===1&&h.high>>>31===1?!1:this.high===h.high&&this.low===h.low},T.eq=T.equals,T.notEquals=function(h){return!this.eq(h)},T.neq=T.notEquals,T.lessThan=function(h){return this.comp(h)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(h){return this.comp(h)<=0},T.lte=T.lessThanOrEqual,T.greaterThan=function(h){return this.comp(h)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(h){return this.comp(h)>=0},T.gte=T.greaterThanOrEqual,T.compare=function(h){if(c(h)||(h=N(h)),this.eq(h))return 0;var S=this.isNegative(),W=h.isNegative();return S&&!W?-1:!S&&W?1:this.unsigned?h.high>>>0>this.high>>>0||h.high===this.high&&h.low>>>0>this.low>>>0?-1:1:this.sub(h).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(m)},T.neg=T.negate,T.add=function(h){c(h)||(h=N(h));var S=this.high>>>16,W=this.high&65535,z=this.low>>>16,H=this.low&65535,q=h.high>>>16,J=h.high&65535,j=h.low>>>16,Y=h.low&65535,Z=0,G=0,Q=0,tr=0;return tr+=H+Y,Q+=tr>>>16,tr&=65535,Q+=z+j,G+=Q>>>16,Q&=65535,G+=W+J,Z+=G>>>16,G&=65535,Z+=S+q,Z&=65535,A(Q<<16|tr,Z<<16|G,this.unsigned)},T.subtract=function(h){return c(h)||(h=N(h)),this.add(h.neg())},T.sub=T.subtract,T.multiply=function(h){if(this.isZero()||(c(h)||(h=N(h)),h.isZero()))return u;if(this.eq(k))return h.isOdd()?k:u;if(h.eq(k))return this.isOdd()?k:u;if(this.isNegative())return h.isNegative()?this.neg().mul(h.neg()):this.neg().mul(h).neg();if(h.isNegative())return this.mul(h.neg()).neg();if(this.lt(s)&&h.lt(s))return x(this.toNumber()*h.toNumber(),this.unsigned);var S=this.high>>>16,W=this.high&65535,z=this.low>>>16,H=this.low&65535,q=h.high>>>16,J=h.high&65535,j=h.low>>>16,Y=h.low&65535,Z=0,G=0,Q=0,tr=0;return tr+=H*Y,Q+=tr>>>16,tr&=65535,Q+=z*Y,G+=Q>>>16,Q&=65535,Q+=H*j,G+=Q>>>16,Q&=65535,G+=W*Y,Z+=G>>>16,G&=65535,G+=z*j,Z+=G>>>16,G&=65535,G+=H*J,Z+=G>>>16,G&=65535,Z+=S*Y+W*j+z*J+H*q,Z&=65535,A(Q<<16|tr,Z<<16|G,this.unsigned)},T.mul=T.multiply,T.divide=function(h){if(c(h)||(h=N(h)),h.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?f:u;var S,W,z;if(this.unsigned){if(h.unsigned||(h=h.toUnsigned()),h.gt(this))return f;if(h.gt(this.shru(1)))return _;z=f}else{if(this.eq(k)){if(h.eq(m)||h.eq(C))return k;if(h.eq(k))return m;var H=this.shr(1);return S=H.div(h).shl(1),S.eq(u)?h.isNegative()?m:C:(W=this.sub(h.mul(S)),z=S.add(W.div(h)),z)}else if(h.eq(k))return this.unsigned?f:u;if(this.isNegative())return h.isNegative()?this.neg().div(h.neg()):this.neg().div(h).neg();if(h.isNegative())return this.div(h.neg()).neg();z=u}for(W=this;W.gte(h);){S=Math.max(1,Math.floor(W.toNumber()/h.toNumber()));for(var q=Math.ceil(Math.log(S)/Math.LN2),J=q<=48?1:V(2,q-48),j=x(S),Y=j.mul(h);Y.isNegative()||Y.gt(W);)S-=J,j=x(S,this.unsigned),Y=j.mul(h);j.isZero()&&(j=m),z=z.add(j),W=W.sub(Y)}return z},T.div=T.divide,T.modulo=function(h){return c(h)||(h=N(h)),this.sub(this.div(h).mul(h))},T.mod=T.modulo,T.not=function(){return A(~this.low,~this.high,this.unsigned)},T.and=function(h){return c(h)||(h=N(h)),A(this.low&h.low,this.high&h.high,this.unsigned)},T.or=function(h){return c(h)||(h=N(h)),A(this.low|h.low,this.high|h.high,this.unsigned)},T.xor=function(h){return c(h)||(h=N(h)),A(this.low^h.low,this.high^h.high,this.unsigned)},T.shiftLeft=function(h){return c(h)&&(h=h.toInt()),(h&=63)===0?this:h<32?A(this.low<<h,this.high<<h|this.low>>>32-h,this.unsigned):A(0,this.low<<h-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(h){return c(h)&&(h=h.toInt()),(h&=63)===0?this:h<32?A(this.low>>>h|this.high<<32-h,this.high>>h,this.unsigned):A(this.high>>h-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(h){if(c(h)&&(h=h.toInt()),h&=63,h===0)return this;var S=this.high;if(h<32){var W=this.low;return A(W>>>h|S<<32-h,S>>>h,this.unsigned)}else return h===32?A(S,0,this.unsigned):A(S>>>h-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?A(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:A(this.low,this.high,!0)},T.toBytes=function(v){return v?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var v=this.high,h=this.low;return[h&255,h>>>8&255,h>>>16&255,h>>>24&255,v&255,v>>>8&255,v>>>16&255,v>>>24&255]},T.toBytesBE=function(){var v=this.high,h=this.low;return[v>>>24&255,v>>>16&255,v>>>8&255,v&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255]},y})}(Rr)),Rr.exports}var Ke=Cr.exports,ge;function rt(){return ge||(ge=1,function(w){/**
 * @license bytebuffer.js (c) 2015 Daniel Wirtz <dcode@dcode.io>
 * Backing buffer: ArrayBuffer, Accessor: Uint8Array
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bytebuffer.js for details
 */(function(y,c){typeof fe=="function"&&w&&w.exports?w.exports=function(){var l;try{l=Qe()}catch{}return c(l)}():(y.dcodeIO=y.dcodeIO||{}).ByteBuffer=c(y.dcodeIO.Long)})(Ke,function(y){var c=function(r,e,t){if(typeof r>"u"&&(r=c.DEFAULT_CAPACITY),typeof e>"u"&&(e=c.DEFAULT_ENDIAN),typeof t>"u"&&(t=c.DEFAULT_NOASSERT),!t){if(r=r|0,r<0)throw RangeError("Illegal capacity");e=!!e,t=!!t}this.buffer=r===0?p:new ArrayBuffer(r),this.view=r===0?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=r,this.littleEndian=e,this.noAssert=t};c.VERSION="5.0.1",c.LITTLE_ENDIAN=!0,c.BIG_ENDIAN=!1,c.DEFAULT_CAPACITY=16,c.DEFAULT_ENDIAN=c.BIG_ENDIAN,c.DEFAULT_NOASSERT=!1,c.Long=y||null;var l=c.prototype;l.__isByteBuffer__,Object.defineProperty(l,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var p=new ArrayBuffer(0),U=String.fromCharCode;function x(r){var e=0;return function(){return e<r.length?r.charCodeAt(e++):null}}function A(){var r=[],e=[];return function(){if(arguments.length===0)return e.join("")+U.apply(String,r);r.length+arguments.length>1024&&(e.push(U.apply(String,r)),r.length=0),Array.prototype.push.apply(r,arguments)}}c.accessor=function(){return Uint8Array},c.allocate=function(r,e,t){return new c(r,e,t)},c.concat=function(r,e,t,a){(typeof e=="boolean"||typeof e!="string")&&(a=t,t=e,e=void 0);for(var s=0,u=0,f=r.length,m;u<f;++u)c.isByteBuffer(r[u])||(r[u]=c.wrap(r[u],e)),m=r[u].limit-r[u].offset,m>0&&(s+=m);if(s===0)return new c(0,t,a);var _=new c(s,t,a),C;for(u=0;u<f;)C=r[u++],m=C.limit-C.offset,!(m<=0)&&(_.view.set(C.view.subarray(C.offset,C.limit),_.offset),_.offset+=m);return _.limit=_.offset,_.offset=0,_},c.isByteBuffer=function(r){return(r&&r.__isByteBuffer__)===!0},c.type=function(){return ArrayBuffer},c.wrap=function(r,e,t,a){if(typeof e!="string"&&(a=t,t=e,e=void 0),typeof r=="string")switch(typeof e>"u"&&(e="utf8"),e){case"base64":return c.fromBase64(r,t);case"hex":return c.fromHex(r,t);case"binary":return c.fromBinary(r,t);case"utf8":return c.fromUTF8(r,t);case"debug":return c.fromDebug(r,t);default:throw Error("Unsupported encoding: "+e)}if(r===null||typeof r!="object")throw TypeError("Illegal buffer");var s;if(c.isByteBuffer(r))return s=l.clone.call(r),s.markedOffset=-1,s;if(r instanceof Uint8Array)s=new c(0,t,a),r.length>0&&(s.buffer=r.buffer,s.offset=r.byteOffset,s.limit=r.byteOffset+r.byteLength,s.view=new Uint8Array(r.buffer));else if(r instanceof ArrayBuffer)s=new c(0,t,a),r.byteLength>0&&(s.buffer=r,s.offset=0,s.limit=r.byteLength,s.view=r.byteLength>0?new Uint8Array(r):null);else if(Object.prototype.toString.call(r)==="[object Array]"){s=new c(r.length,t,a),s.limit=r.length;for(var u=0;u<r.length;++u)s.view[u]=r[u]}else throw TypeError("Illegal buffer");return s},l.writeBitSet=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(!(r instanceof Array))throw TypeError("Illegal BitSet: Not an array");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var a=e,s=r.length,u=s>>3,f=0,m;for(e+=this.writeVarint32(s,e);u--;)m=!!r[f++]&1|(!!r[f++]&1)<<1|(!!r[f++]&1)<<2|(!!r[f++]&1)<<3|(!!r[f++]&1)<<4|(!!r[f++]&1)<<5|(!!r[f++]&1)<<6|(!!r[f++]&1)<<7,this.writeByte(m,e++);if(f<s){var _=0;for(m=0;f<s;)m=m|(!!r[f++]&1)<<_++;this.writeByte(m,e++)}return t?(this.offset=e,this):e-a},l.readBitSet=function(r){var e=typeof r>"u";e&&(r=this.offset);var t=this.readVarint32(r),a=t.value,s=a>>3,u=0,f=[],m;for(r+=t.length;s--;)m=this.readByte(r++),f[u++]=!!(m&1),f[u++]=!!(m&2),f[u++]=!!(m&4),f[u++]=!!(m&8),f[u++]=!!(m&16),f[u++]=!!(m&32),f[u++]=!!(m&64),f[u++]=!!(m&128);if(u<a){var _=0;for(m=this.readByte(r++);u<a;)f[u++]=!!(m>>_++&1)}return e&&(this.offset=r),f},l.readBytes=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+r>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+r+") <= "+this.buffer.byteLength)}var a=this.slice(e,e+r);return t&&(this.offset+=r),a},l.writeBytes=l.append,l.writeInt8=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal value: "+r+" (not an integer)");if(r|=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=1,this.view[e]=r,t&&(this.offset+=1),this},l.writeByte=l.writeInt8,l.readInt8=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+1) <= "+this.buffer.byteLength)}var t=this.view[r];return(t&128)===128&&(t=-(255-t+1)),e&&(this.offset+=1),t},l.readByte=l.readInt8,l.writeUint8=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal value: "+r+" (not an integer)");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=1,this.view[e]=r,t&&(this.offset+=1),this},l.writeUInt8=l.writeUint8,l.readUint8=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+1) <= "+this.buffer.byteLength)}var t=this.view[r];return e&&(this.offset+=1),t},l.readUInt8=l.readUint8,l.writeInt16=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal value: "+r+" (not an integer)");if(r|=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=2,this.littleEndian?(this.view[e+1]=(r&65280)>>>8,this.view[e]=r&255):(this.view[e]=(r&65280)>>>8,this.view[e+1]=r&255),t&&(this.offset+=2),this},l.writeShort=l.writeInt16,l.readInt16=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+2) <= "+this.buffer.byteLength)}var t=0;return this.littleEndian?(t=this.view[r],t|=this.view[r+1]<<8):(t=this.view[r]<<8,t|=this.view[r+1]),(t&32768)===32768&&(t=-(65535-t+1)),e&&(this.offset+=2),t},l.readShort=l.readInt16,l.writeUint16=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal value: "+r+" (not an integer)");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=2,this.littleEndian?(this.view[e+1]=(r&65280)>>>8,this.view[e]=r&255):(this.view[e]=(r&65280)>>>8,this.view[e+1]=r&255),t&&(this.offset+=2),this},l.writeUInt16=l.writeUint16,l.readUint16=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+2) <= "+this.buffer.byteLength)}var t=0;return this.littleEndian?(t=this.view[r],t|=this.view[r+1]<<8):(t=this.view[r]<<8,t|=this.view[r+1]),e&&(this.offset+=2),t},l.readUInt16=l.readUint16,l.writeInt32=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal value: "+r+" (not an integer)");if(r|=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=4,this.littleEndian?(this.view[e+3]=r>>>24&255,this.view[e+2]=r>>>16&255,this.view[e+1]=r>>>8&255,this.view[e]=r&255):(this.view[e]=r>>>24&255,this.view[e+1]=r>>>16&255,this.view[e+2]=r>>>8&255,this.view[e+3]=r&255),t&&(this.offset+=4),this},l.writeInt=l.writeInt32,l.readInt32=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+4) <= "+this.buffer.byteLength)}var t=0;return this.littleEndian?(t=this.view[r+2]<<16,t|=this.view[r+1]<<8,t|=this.view[r],t+=this.view[r+3]<<24>>>0):(t=this.view[r+1]<<16,t|=this.view[r+2]<<8,t|=this.view[r+3],t+=this.view[r]<<24>>>0),t|=0,e&&(this.offset+=4),t},l.readInt=l.readInt32,l.writeUint32=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal value: "+r+" (not an integer)");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=4,this.littleEndian?(this.view[e+3]=r>>>24&255,this.view[e+2]=r>>>16&255,this.view[e+1]=r>>>8&255,this.view[e]=r&255):(this.view[e]=r>>>24&255,this.view[e+1]=r>>>16&255,this.view[e+2]=r>>>8&255,this.view[e+3]=r&255),t&&(this.offset+=4),this},l.writeUInt32=l.writeUint32,l.readUint32=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+4) <= "+this.buffer.byteLength)}var t=0;return this.littleEndian?(t=this.view[r+2]<<16,t|=this.view[r+1]<<8,t|=this.view[r],t+=this.view[r+3]<<24>>>0):(t=this.view[r+1]<<16,t|=this.view[r+2]<<8,t|=this.view[r+3],t+=this.view[r]<<24>>>0),e&&(this.offset+=4),t},l.readUInt32=l.readUint32,y&&(l.writeInt64=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r=="number")r=y.fromNumber(r);else if(typeof r=="string")r=y.fromString(r);else if(!(r&&r instanceof y))throw TypeError("Illegal value: "+r+" (not an integer or Long)");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}typeof r=="number"?r=y.fromNumber(r):typeof r=="string"&&(r=y.fromString(r)),e+=8;var a=this.buffer.byteLength;e>a&&this.resize((a*=2)>e?a:e),e-=8;var s=r.low,u=r.high;return this.littleEndian?(this.view[e+3]=s>>>24&255,this.view[e+2]=s>>>16&255,this.view[e+1]=s>>>8&255,this.view[e]=s&255,e+=4,this.view[e+3]=u>>>24&255,this.view[e+2]=u>>>16&255,this.view[e+1]=u>>>8&255,this.view[e]=u&255):(this.view[e]=u>>>24&255,this.view[e+1]=u>>>16&255,this.view[e+2]=u>>>8&255,this.view[e+3]=u&255,e+=4,this.view[e]=s>>>24&255,this.view[e+1]=s>>>16&255,this.view[e+2]=s>>>8&255,this.view[e+3]=s&255),t&&(this.offset+=8),this},l.writeLong=l.writeInt64,l.readInt64=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+8) <= "+this.buffer.byteLength)}var t=0,a=0;this.littleEndian?(t=this.view[r+2]<<16,t|=this.view[r+1]<<8,t|=this.view[r],t+=this.view[r+3]<<24>>>0,r+=4,a=this.view[r+2]<<16,a|=this.view[r+1]<<8,a|=this.view[r],a+=this.view[r+3]<<24>>>0):(a=this.view[r+1]<<16,a|=this.view[r+2]<<8,a|=this.view[r+3],a+=this.view[r]<<24>>>0,r+=4,t=this.view[r+1]<<16,t|=this.view[r+2]<<8,t|=this.view[r+3],t+=this.view[r]<<24>>>0);var s=new y(t,a,!1);return e&&(this.offset+=8),s},l.readLong=l.readInt64,l.writeUint64=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r=="number")r=y.fromNumber(r);else if(typeof r=="string")r=y.fromString(r);else if(!(r&&r instanceof y))throw TypeError("Illegal value: "+r+" (not an integer or Long)");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}typeof r=="number"?r=y.fromNumber(r):typeof r=="string"&&(r=y.fromString(r)),e+=8;var a=this.buffer.byteLength;e>a&&this.resize((a*=2)>e?a:e),e-=8;var s=r.low,u=r.high;return this.littleEndian?(this.view[e+3]=s>>>24&255,this.view[e+2]=s>>>16&255,this.view[e+1]=s>>>8&255,this.view[e]=s&255,e+=4,this.view[e+3]=u>>>24&255,this.view[e+2]=u>>>16&255,this.view[e+1]=u>>>8&255,this.view[e]=u&255):(this.view[e]=u>>>24&255,this.view[e+1]=u>>>16&255,this.view[e+2]=u>>>8&255,this.view[e+3]=u&255,e+=4,this.view[e]=s>>>24&255,this.view[e+1]=s>>>16&255,this.view[e+2]=s>>>8&255,this.view[e+3]=s&255),t&&(this.offset+=8),this},l.writeUInt64=l.writeUint64,l.readUint64=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+8) <= "+this.buffer.byteLength)}var t=0,a=0;this.littleEndian?(t=this.view[r+2]<<16,t|=this.view[r+1]<<8,t|=this.view[r],t+=this.view[r+3]<<24>>>0,r+=4,a=this.view[r+2]<<16,a|=this.view[r+1]<<8,a|=this.view[r],a+=this.view[r+3]<<24>>>0):(a=this.view[r+1]<<16,a|=this.view[r+2]<<8,a|=this.view[r+3],a+=this.view[r]<<24>>>0,r+=4,t=this.view[r+1]<<16,t|=this.view[r+2]<<8,t|=this.view[r+3],t+=this.view[r]<<24>>>0);var s=new y(t,a,!0);return e&&(this.offset+=8),s},l.readUInt64=l.readUint64);function V(r,e,t,a,s){var u,f,m=s*8-a-1,_=(1<<m)-1,C=_>>1,P=-7,D=t?s-1:0,k=t?-1:1,T=r[e+D];for(D+=k,u=T&(1<<-P)-1,T>>=-P,P+=m;P>0;u=u*256+r[e+D],D+=k,P-=8);for(f=u&(1<<-P)-1,u>>=-P,P+=a;P>0;f=f*256+r[e+D],D+=k,P-=8);if(u===0)u=1-C;else{if(u===_)return f?NaN:(T?-1:1)*(1/0);f=f+Math.pow(2,a),u=u-C}return(T?-1:1)*f*Math.pow(2,u-a)}function B(r,e,t,a,s,u){var f,m,_,C=u*8-s-1,P=(1<<C)-1,D=P>>1,k=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=a?0:u-1,v=a?1:-1,h=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(m=isNaN(e)?1:0,f=P):(f=Math.floor(Math.log(e)/Math.LN2),e*(_=Math.pow(2,-f))<1&&(f--,_*=2),f+D>=1?e+=k/_:e+=k*Math.pow(2,1-D),e*_>=2&&(f++,_/=2),f+D>=P?(m=0,f=P):f+D>=1?(m=(e*_-1)*Math.pow(2,s),f=f+D):(m=e*Math.pow(2,D-1)*Math.pow(2,s),f=0));s>=8;r[t+T]=m&255,T+=v,m/=256,s-=8);for(f=f<<s|m,C+=s;C>0;r[t+T]=f&255,T+=v,f/=256,C-=8);r[t+T-v]|=h*128}l.writeFloat32=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number")throw TypeError("Illegal value: "+r+" (not a number)");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=4,B(this.view,r,e,this.littleEndian,23,4),t&&(this.offset+=4),this},l.writeFloat=l.writeFloat32,l.readFloat32=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+4) <= "+this.buffer.byteLength)}var t=V(this.view,r,this.littleEndian,23,4);return e&&(this.offset+=4),t},l.readFloat=l.readFloat32,l.writeFloat64=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number")throw TypeError("Illegal value: "+r+" (not a number)");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var a=this.buffer.byteLength;return e>a&&this.resize((a*=2)>e?a:e),e-=8,B(this.view,r,e,this.littleEndian,52,8),t&&(this.offset+=8),this},l.writeDouble=l.writeFloat64,l.readFloat64=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+8) <= "+this.buffer.byteLength)}var t=V(this.view,r,this.littleEndian,52,8);return e&&(this.offset+=8),t},l.readDouble=l.readFloat64,c.MAX_VARINT32_BYTES=5,c.calculateVarint32=function(r){return r=r>>>0,r<128?1:r<16384?2:r<1<<21?3:r<1<<28?4:5},c.zigZagEncode32=function(r){return((r|=0)<<1^r>>31)>>>0},c.zigZagDecode32=function(r){return r>>>1^-(r&1)|0},l.writeVarint32=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal value: "+r+" (not an integer)");if(r|=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var a=c.calculateVarint32(r),s;e+=a;var u=this.buffer.byteLength;for(e>u&&this.resize((u*=2)>e?u:e),e-=a,r>>>=0;r>=128;)s=r&127|128,this.view[e++]=s,r>>>=7;return this.view[e++]=r,t?(this.offset=e,this):a},l.writeVarint32ZigZag=function(r,e){return this.writeVarint32(c.zigZagEncode32(r),e)},l.readVarint32=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+1) <= "+this.buffer.byteLength)}var t=0,a=0,s;do{if(!this.noAssert&&r>this.limit){var u=Error("Truncated");throw u.truncated=!0,u}s=this.view[r++],t<5&&(a|=(s&127)<<7*t),++t}while(s&128);return a|=0,e?(this.offset=r,a):{value:a,length:t}},l.readVarint32ZigZag=function(r){var e=this.readVarint32(r);return typeof e=="object"?e.value=c.zigZagDecode32(e.value):e=c.zigZagDecode32(e),e},y&&(c.MAX_VARINT64_BYTES=10,c.calculateVarint64=function(r){typeof r=="number"?r=y.fromNumber(r):typeof r=="string"&&(r=y.fromString(r));var e=r.toInt()>>>0,t=r.shiftRightUnsigned(28).toInt()>>>0,a=r.shiftRightUnsigned(56).toInt()>>>0;return a==0?t==0?e<16384?e<128?1:2:e<1<<21?3:4:t<16384?t<128?5:6:t<1<<21?7:8:a<128?9:10},c.zigZagEncode64=function(r){return typeof r=="number"?r=y.fromNumber(r,!1):typeof r=="string"?r=y.fromString(r,!1):r.unsigned!==!1&&(r=r.toSigned()),r.shiftLeft(1).xor(r.shiftRight(63)).toUnsigned()},c.zigZagDecode64=function(r){return typeof r=="number"?r=y.fromNumber(r,!1):typeof r=="string"?r=y.fromString(r,!1):r.unsigned!==!1&&(r=r.toSigned()),r.shiftRightUnsigned(1).xor(r.and(y.ONE).toSigned().negate()).toSigned()},l.writeVarint64=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r=="number")r=y.fromNumber(r);else if(typeof r=="string")r=y.fromString(r);else if(!(r&&r instanceof y))throw TypeError("Illegal value: "+r+" (not an integer or Long)");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}typeof r=="number"?r=y.fromNumber(r,!1):typeof r=="string"?r=y.fromString(r,!1):r.unsigned!==!1&&(r=r.toSigned());var a=c.calculateVarint64(r),s=r.toInt()>>>0,u=r.shiftRightUnsigned(28).toInt()>>>0,f=r.shiftRightUnsigned(56).toInt()>>>0;e+=a;var m=this.buffer.byteLength;switch(e>m&&this.resize((m*=2)>e?m:e),e-=a,a){case 10:this.view[e+9]=f>>>7&1;case 9:this.view[e+8]=a!==9?f|128:f&127;case 8:this.view[e+7]=a!==8?u>>>21|128:u>>>21&127;case 7:this.view[e+6]=a!==7?u>>>14|128:u>>>14&127;case 6:this.view[e+5]=a!==6?u>>>7|128:u>>>7&127;case 5:this.view[e+4]=a!==5?u|128:u&127;case 4:this.view[e+3]=a!==4?s>>>21|128:s>>>21&127;case 3:this.view[e+2]=a!==3?s>>>14|128:s>>>14&127;case 2:this.view[e+1]=a!==2?s>>>7|128:s>>>7&127;case 1:this.view[e]=a!==1?s|128:s&127}return t?(this.offset+=a,this):a},l.writeVarint64ZigZag=function(r,e){return this.writeVarint64(c.zigZagEncode64(r),e)},l.readVarint64=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+1) <= "+this.buffer.byteLength)}var t=r,a=0,s=0,u=0,f=0;if(f=this.view[r++],a=f&127,f&128&&(f=this.view[r++],a|=(f&127)<<7,(f&128||this.noAssert&&typeof f>"u")&&(f=this.view[r++],a|=(f&127)<<14,(f&128||this.noAssert&&typeof f>"u")&&(f=this.view[r++],a|=(f&127)<<21,(f&128||this.noAssert&&typeof f>"u")&&(f=this.view[r++],s=f&127,(f&128||this.noAssert&&typeof f>"u")&&(f=this.view[r++],s|=(f&127)<<7,(f&128||this.noAssert&&typeof f>"u")&&(f=this.view[r++],s|=(f&127)<<14,(f&128||this.noAssert&&typeof f>"u")&&(f=this.view[r++],s|=(f&127)<<21,(f&128||this.noAssert&&typeof f>"u")&&(f=this.view[r++],u=f&127,(f&128||this.noAssert&&typeof f>"u")&&(f=this.view[r++],u|=(f&127)<<7,f&128||this.noAssert&&typeof f>"u"))))))))))throw Error("Buffer overrun");var m=y.fromBits(a|s<<28,s>>>4|u<<24,!1);return e?(this.offset=r,m):{value:m,length:r-t}},l.readVarint64ZigZag=function(r){var e=this.readVarint64(r);return e&&e.value instanceof y?e.value=c.zigZagDecode64(e.value):e=c.zigZagDecode64(e),e}),l.writeCString=function(r,e){var t=typeof e>"u";t&&(e=this.offset);var a,s=r.length;if(!this.noAssert){if(typeof r!="string")throw TypeError("Illegal str: Not a string");for(a=0;a<s;++a)if(r.charCodeAt(a)===0)throw RangeError("Illegal str: Contains NULL-characters");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}s=R.calculateUTF16asUTF8(x(r))[1],e+=s+1;var u=this.buffer.byteLength;return e>u&&this.resize((u*=2)>e?u:e),e-=s+1,R.encodeUTF16toUTF8(x(r),(function(f){this.view[e++]=f}).bind(this)),this.view[e++]=0,t?(this.offset=e,this):s},l.readCString=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+1) <= "+this.buffer.byteLength)}var t=r,a,s=-1;return R.decodeUTF8toUTF16((function(){if(s===0)return null;if(r>=this.limit)throw RangeError("Illegal range: Truncated data, "+r+" < "+this.limit);return s=this.view[r++],s===0?null:s}).bind(this),a=A(),!0),e?(this.offset=r,a()):{string:a(),length:r-t}},l.writeIString=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="string")throw TypeError("Illegal str: Not a string");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var a=e,s;s=R.calculateUTF16asUTF8(x(r),this.noAssert)[1],e+=4+s;var u=this.buffer.byteLength;if(e>u&&this.resize((u*=2)>e?u:e),e-=4+s,this.littleEndian?(this.view[e+3]=s>>>24&255,this.view[e+2]=s>>>16&255,this.view[e+1]=s>>>8&255,this.view[e]=s&255):(this.view[e]=s>>>24&255,this.view[e+1]=s>>>16&255,this.view[e+2]=s>>>8&255,this.view[e+3]=s&255),e+=4,R.encodeUTF16toUTF8(x(r),(function(f){this.view[e++]=f}).bind(this)),e!==a+4+s)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+4+s));return t?(this.offset=e,this):e-a},l.readIString=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+4) <= "+this.buffer.byteLength)}var t=r,a=this.readUint32(r),s=this.readUTF8String(a,c.METRICS_BYTES,r+=4);return r+=s.length,e?(this.offset=r,s.string):{string:s.string,length:r-t}},c.METRICS_CHARS="c",c.METRICS_BYTES="b",l.writeUTF8String=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var a,s=e;a=R.calculateUTF16asUTF8(x(r))[1],e+=a;var u=this.buffer.byteLength;return e>u&&this.resize((u*=2)>e?u:e),e-=a,R.encodeUTF16toUTF8(x(r),(function(f){this.view[e++]=f}).bind(this)),t?(this.offset=e,this):e-s},l.writeString=l.writeUTF8String,c.calculateUTF8Chars=function(r){return R.calculateUTF16asUTF8(x(r))[0]},c.calculateUTF8Bytes=function(r){return R.calculateUTF16asUTF8(x(r))[1]},c.calculateString=c.calculateUTF8Bytes,l.readUTF8String=function(r,e,t){typeof e=="number"&&(t=e,e=void 0);var a=typeof t>"u";if(a&&(t=this.offset),typeof e>"u"&&(e=c.METRICS_CHARS),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal length: "+r+" (not an integer)");if(r|=0,typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var s=0,u=t,f;if(e===c.METRICS_CHARS){if(f=A(),R.decodeUTF8((function(){return s<r&&t<this.limit?this.view[t++]:null}).bind(this),function(_){++s,R.UTF8toUTF16(_,f)}),s!==r)throw RangeError("Illegal range: Truncated data, "+s+" == "+r);return a?(this.offset=t,f()):{string:f(),length:t-u}}else if(e===c.METRICS_BYTES){if(!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+r>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+r+") <= "+this.buffer.byteLength)}var m=t+r;if(R.decodeUTF8toUTF16((function(){return t<m?this.view[t++]:null}).bind(this),f=A(),this.noAssert),t!==m)throw RangeError("Illegal range: Truncated data, "+t+" == "+m);return a?(this.offset=t,f()):{string:f(),length:t-u}}else throw TypeError("Unsupported metrics: "+e)},l.readString=l.readUTF8String,l.writeVString=function(r,e){var t=typeof e>"u";if(t&&(e=this.offset),!this.noAssert){if(typeof r!="string")throw TypeError("Illegal str: Not a string");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var a=e,s,u;s=R.calculateUTF16asUTF8(x(r),this.noAssert)[1],u=c.calculateVarint32(s),e+=u+s;var f=this.buffer.byteLength;if(e>f&&this.resize((f*=2)>e?f:e),e-=u+s,e+=this.writeVarint32(s,e),R.encodeUTF16toUTF8(x(r),(function(m){this.view[e++]=m}).bind(this)),e!==a+s+u)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+s+u));return t?(this.offset=e,this):e-a},l.readVString=function(r){var e=typeof r>"u";if(e&&(r=this.offset),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+1) <= "+this.buffer.byteLength)}var t=r,a=this.readVarint32(r),s=this.readUTF8String(a.value,c.METRICS_BYTES,r+=a.length);return r+=s.length,e?(this.offset=r,s.string):{string:s.string,length:r-t}},l.append=function(r,e,t){(typeof e=="number"||typeof e!="string")&&(t=e,e=void 0);var a=typeof t>"u";if(a&&(t=this.offset),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}r instanceof c||(r=c.wrap(r,e));var s=r.limit-r.offset;if(s<=0)return this;t+=s;var u=this.buffer.byteLength;return t>u&&this.resize((u*=2)>t?u:t),t-=s,this.view.set(r.view.subarray(r.offset,r.limit),t),r.offset+=s,a&&(this.offset+=s),this},l.appendTo=function(r,e){return r.append(this,e),this},l.assert=function(r){return this.noAssert=!r,this},l.capacity=function(){return this.buffer.byteLength},l.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},l.clone=function(r){var e=new c(0,this.littleEndian,this.noAssert);return r?(e.buffer=new ArrayBuffer(this.buffer.byteLength),e.view=new Uint8Array(e.buffer)):(e.buffer=this.buffer,e.view=this.view),e.offset=this.offset,e.markedOffset=this.markedOffset,e.limit=this.limit,e},l.compact=function(r,e){if(typeof r>"u"&&(r=this.offset),typeof e>"u"&&(e=this.limit),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal begin: Not an integer");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,r<0||r>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+r+" <= "+e+" <= "+this.buffer.byteLength)}if(r===0&&e===this.buffer.byteLength)return this;var t=e-r;if(t===0)return this.buffer=p,this.view=null,this.markedOffset>=0&&(this.markedOffset-=r),this.offset=0,this.limit=0,this;var a=new ArrayBuffer(t),s=new Uint8Array(a);return s.set(this.view.subarray(r,e)),this.buffer=a,this.view=s,this.markedOffset>=0&&(this.markedOffset-=r),this.offset=0,this.limit=t,this},l.copy=function(r,e){if(typeof r>"u"&&(r=this.offset),typeof e>"u"&&(e=this.limit),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal begin: Not an integer");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,r<0||r>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+r+" <= "+e+" <= "+this.buffer.byteLength)}if(r===e)return new c(0,this.littleEndian,this.noAssert);var t=e-r,a=new c(t,this.littleEndian,this.noAssert);return a.offset=0,a.limit=t,a.markedOffset>=0&&(a.markedOffset-=r),this.copyTo(a,0,r,e),a},l.copyTo=function(r,e,t,a){var s,u;if(!this.noAssert&&!c.isByteBuffer(r))throw TypeError("Illegal target: Not a ByteBuffer");if(e=(u=typeof e>"u")?r.offset:e|0,t=(s=typeof t>"u")?this.offset:t|0,a=typeof a>"u"?this.limit:a|0,e<0||e>r.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+e+" <= "+r.buffer.byteLength);if(t<0||a>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+t+" <= "+this.buffer.byteLength);var f=a-t;return f===0?r:(r.ensureCapacity(e+f),r.view.set(this.view.subarray(t,a),e),s&&(this.offset+=f),u&&(r.offset+=f),this)},l.ensureCapacity=function(r){var e=this.buffer.byteLength;return e<r?this.resize((e*=2)>r?e:r):this},l.fill=function(r,e,t){var a=typeof e>"u";if(a&&(e=this.offset),typeof r=="string"&&r.length>0&&(r=r.charCodeAt(0)),typeof e>"u"&&(e=this.offset),typeof t>"u"&&(t=this.limit),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal value: "+r+" (not an integer)");if(r|=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,typeof t!="number"||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e>=t)return this;for(;e<t;)this.view[e++]=r;return a&&(this.offset=e),this},l.flip=function(){return this.limit=this.offset,this.offset=0,this},l.mark=function(r){if(r=typeof r>"u"?this.offset:r,!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=r,this},l.order=function(r){if(!this.noAssert&&typeof r!="boolean")throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!r,this},l.LE=function(r){return this.littleEndian=typeof r<"u"?!!r:!0,this},l.BE=function(r){return this.littleEndian=typeof r<"u"?!r:!1,this},l.prepend=function(r,e,t){(typeof e=="number"||typeof e!="string")&&(t=e,e=void 0);var a=typeof t>"u";if(a&&(t=this.offset),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}r instanceof c||(r=c.wrap(r,e));var s=r.limit-r.offset;if(s<=0)return this;var u=s-t;if(u>0){var f=new ArrayBuffer(this.buffer.byteLength+u),m=new Uint8Array(f);m.set(this.view.subarray(t,this.buffer.byteLength),s),this.buffer=f,this.view=m,this.offset+=u,this.markedOffset>=0&&(this.markedOffset+=u),this.limit+=u,t+=u}else new Uint8Array(this.buffer);return this.view.set(r.view.subarray(r.offset,r.limit),t-s),r.offset=r.limit,a&&(this.offset-=s),this},l.prependTo=function(r,e){return r.prepend(this,e),this},l.printDebug=function(r){typeof r!="function"&&(r=console.log.bind(console)),r(this.toString()+`
-------------------------------------------------------------------
`+this.toDebug(!0))},l.remaining=function(){return this.limit-this.offset},l.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},l.resize=function(r){if(!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal capacity: "+r+" (not an integer)");if(r|=0,r<0)throw RangeError("Illegal capacity: 0 <= "+r)}if(this.buffer.byteLength<r){var e=new ArrayBuffer(r),t=new Uint8Array(e);t.set(this.view),this.buffer=e,this.view=t}return this},l.reverse=function(r,e){if(typeof r>"u"&&(r=this.offset),typeof e>"u"&&(e=this.limit),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal begin: Not an integer");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,r<0||r>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+r+" <= "+e+" <= "+this.buffer.byteLength)}return r===e?this:(Array.prototype.reverse.call(this.view.subarray(r,e)),this)},l.skip=function(r){if(!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal length: "+r+" (not an integer)");r|=0}var e=this.offset+r;if(!this.noAssert&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+r+" <= "+this.buffer.byteLength);return this.offset=e,this},l.slice=function(r,e){if(typeof r>"u"&&(r=this.offset),typeof e>"u"&&(e=this.limit),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal begin: Not an integer");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,r<0||r>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+r+" <= "+e+" <= "+this.buffer.byteLength)}var t=this.clone();return t.offset=r,t.limit=e,t},l.toBuffer=function(r){var e=this.offset,t=this.limit;if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,typeof t!="number"||t%1!==0)throw TypeError("Illegal limit: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(!r&&e===0&&t===this.buffer.byteLength)return this.buffer;if(e===t)return p;var a=new ArrayBuffer(t-e);return new Uint8Array(a).set(new Uint8Array(this.buffer).subarray(e,t),0),a},l.toArrayBuffer=l.toBuffer,l.toString=function(r,e,t){if(typeof r>"u")return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch(typeof r=="number"&&(r="utf8",e=r,t=e),r){case"utf8":return this.toUTF8(e,t);case"base64":return this.toBase64(e,t);case"hex":return this.toHex(e,t);case"binary":return this.toBinary(e,t);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+r)}};var N=function(){for(var r={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],t=[],a=0,s=e.length;a<s;++a)t[e[a]]=a;return r.encode=function(u,f){for(var m,_;(m=u())!==null;)f(e[m>>2&63]),_=(m&3)<<4,(m=u())!==null?(_|=m>>4&15,f(e[(_|m>>4&15)&63]),_=(m&15)<<2,(m=u())!==null?(f(e[(_|m>>6&3)&63]),f(e[m&63])):(f(e[_&63]),f(61))):(f(e[_&63]),f(61),f(61))},r.decode=function(u,f){var m,_,C;function P(D){throw Error("Illegal character code: "+D)}for(;(m=u())!==null;)if(_=t[m],typeof _>"u"&&P(m),(m=u())!==null&&(C=t[m],typeof C>"u"&&P(m),f(_<<2>>>0|(C&48)>>4),(m=u())!==null)){if(_=t[m],typeof _>"u"){if(m===61)break;P(m)}if(f((C&15)<<4>>>0|(_&60)>>2),(m=u())!==null){if(C=t[m],typeof C>"u"){if(m===61)break;P(m)}f((_&3)<<6>>>0|C)}}},r.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)},r}();l.toBase64=function(r,e){if(typeof r>"u"&&(r=this.offset),typeof e>"u"&&(e=this.limit),r=r|0,e=e|0,r<0||e>this.capacity||r>e)throw RangeError("begin, end");var t;return N.encode((function(){return r<e?this.view[r++]:null}).bind(this),t=A()),t()},c.fromBase64=function(r,e){if(typeof r!="string")throw TypeError("str");var t=new c(r.length/4*3,e),a=0;return N.decode(x(r),function(s){t.view[a++]=s}),t.limit=a,t},c.btoa=function(r){return c.fromBinary(r).toBase64()},c.atob=function(r){return c.fromBase64(r).toBinary()},l.toBinary=function(r,e){if(typeof r>"u"&&(r=this.offset),typeof e>"u"&&(e=this.limit),r|=0,e|=0,r<0||e>this.capacity()||r>e)throw RangeError("begin, end");if(r===e)return"";for(var t=[],a=[];r<e;)t.push(this.view[r++]),t.length>=1024&&(a.push(String.fromCharCode.apply(String,t)),t=[]);return a.join("")+String.fromCharCode.apply(String,t)},c.fromBinary=function(r,e){if(typeof r!="string")throw TypeError("str");for(var t=0,a=r.length,s,u=new c(a,e);t<a;){if(s=r.charCodeAt(t),s>255)throw RangeError("illegal char code: "+s);u.view[t++]=s}return u.limit=a,u},l.toDebug=function(r){for(var e=-1,t=this.buffer.byteLength,a,s="",u="",f="";e<t;){if(e!==-1&&(a=this.view[e],a<16?s+="0"+a.toString(16).toUpperCase():s+=a.toString(16).toUpperCase(),r&&(u+=a>32&&a<127?String.fromCharCode(a):".")),++e,r&&e>0&&e%16===0&&e!==t){for(;s.length<3*16+3;)s+=" ";f+=s+u+`
`,s=u=""}e===this.offset&&e===this.limit?s+=e===this.markedOffset?"!":"|":e===this.offset?s+=e===this.markedOffset?"[":"<":e===this.limit?s+=e===this.markedOffset?"]":">":s+=e===this.markedOffset?"'":r||e!==0&&e!==t?" ":""}if(r&&s!==" "){for(;s.length<3*16+3;)s+=" ";f+=s+u+`
`}return r?f:s},c.fromDebug=function(r,e,t){for(var a=r.length,s=new c((a+1)/3|0,e,t),u=0,f=0,m,_,C=!1,P=!1,D=!1,k=!1,T=!1;u<a;){switch(m=r.charAt(u++)){case"!":if(!t){if(P||D||k){T=!0;break}P=D=k=!0}s.offset=s.markedOffset=s.limit=f,C=!1;break;case"|":if(!t){if(P||k){T=!0;break}P=k=!0}s.offset=s.limit=f,C=!1;break;case"[":if(!t){if(P||D){T=!0;break}P=D=!0}s.offset=s.markedOffset=f,C=!1;break;case"<":if(!t){if(P){T=!0;break}P=!0}s.offset=f,C=!1;break;case"]":if(!t){if(k||D){T=!0;break}k=D=!0}s.limit=s.markedOffset=f,C=!1;break;case">":if(!t){if(k){T=!0;break}k=!0}s.limit=f,C=!1;break;case"'":if(!t){if(D){T=!0;break}D=!0}s.markedOffset=f,C=!1;break;case" ":C=!1;break;default:if(!t&&C){T=!0;break}if(_=parseInt(m+r.charAt(u++),16),!t&&(isNaN(_)||_<0||_>255))throw TypeError("Illegal str: Not a debug encoded string");s.view[f++]=_,C=!0}if(T)throw TypeError("Illegal str: Invalid symbol at "+u)}if(!t){if(!P||!k)throw TypeError("Illegal str: Missing offset or limit");if(f<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+f+" < "+a)}return s},l.toHex=function(r,e){if(r=typeof r>"u"?this.offset:r,e=typeof e>"u"?this.limit:e,!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal begin: Not an integer");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,r<0||r>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+r+" <= "+e+" <= "+this.buffer.byteLength)}for(var t=new Array(e-r),a;r<e;)a=this.view[r++],a<16?t.push("0",a.toString(16)):t.push(a.toString(16));return t.join("")},c.fromHex=function(r,e,t){if(!t){if(typeof r!="string")throw TypeError("Illegal str: Not a string");if(r.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var a=r.length,s=new c(a/2|0,e),u,f=0,m=0;f<a;f+=2){if(u=parseInt(r.substring(f,f+2),16),!t&&(!isFinite(u)||u<0||u>255))throw TypeError("Illegal str: Contains non-hex characters");s.view[m++]=u}return s.limit=m,s};var R=function(){var r={};return r.MAX_CODEPOINT=1114111,r.encodeUTF8=function(e,t){var a=null;for(typeof e=="number"&&(a=e,e=function(){return null});a!==null||(a=e())!==null;)a<128?t(a&127):a<2048?(t(a>>6&31|192),t(a&63|128)):a<65536?(t(a>>12&15|224),t(a>>6&63|128),t(a&63|128)):(t(a>>18&7|240),t(a>>12&63|128),t(a>>6&63|128),t(a&63|128)),a=null},r.decodeUTF8=function(e,t){for(var a,s,u,f,m=function(_){_=_.slice(0,_.indexOf(null));var C=Error(_.toString());throw C.name="TruncatedError",C.bytes=_,C};(a=e())!==null;)if(!(a&128))t(a);else if((a&224)===192)(s=e())===null&&m([a,s]),t((a&31)<<6|s&63);else if((a&240)===224)((s=e())===null||(u=e())===null)&&m([a,s,u]),t((a&15)<<12|(s&63)<<6|u&63);else if((a&248)===240)((s=e())===null||(u=e())===null||(f=e())===null)&&m([a,s,u,f]),t((a&7)<<18|(s&63)<<12|(u&63)<<6|f&63);else throw RangeError("Illegal starting byte: "+a)},r.UTF16toUTF8=function(e,t){for(var a,s=null;(a=s!==null?s:e())!==null;){if(a>=55296&&a<=57343&&(s=e())!==null&&s>=56320&&s<=57343){t((a-55296)*1024+s-56320+65536),s=null;continue}t(a)}s!==null&&t(s)},r.UTF8toUTF16=function(e,t){var a=null;for(typeof e=="number"&&(a=e,e=function(){return null});a!==null||(a=e())!==null;)a<=65535?t(a):(a-=65536,t((a>>10)+55296),t(a%1024+56320)),a=null},r.encodeUTF16toUTF8=function(e,t){r.UTF16toUTF8(e,function(a){r.encodeUTF8(a,t)})},r.decodeUTF8toUTF16=function(e,t){r.decodeUTF8(e,function(a){r.UTF8toUTF16(a,t)})},r.calculateCodePoint=function(e){return e<128?1:e<2048?2:e<65536?3:4},r.calculateUTF8=function(e){for(var t,a=0;(t=e())!==null;)a+=t<128?1:t<2048?2:t<65536?3:4;return a},r.calculateUTF16asUTF8=function(e){var t=0,a=0;return r.UTF16toUTF8(e,function(s){++t,a+=s<128?1:s<2048?2:s<65536?3:4}),[t,a]},r}();return l.toUTF8=function(r,e){if(typeof r>"u"&&(r=this.offset),typeof e>"u"&&(e=this.limit),!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal begin: Not an integer");if(r>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,r<0||r>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+r+" <= "+e+" <= "+this.buffer.byteLength)}var t;try{R.decodeUTF8toUTF16((function(){return r<e?this.view[r++]:null}).bind(this),t=A())}catch{if(r!==e)throw RangeError("Illegal range: Truncated data, "+r+" != "+e)}return t()},c.fromUTF8=function(r,e,t){if(!t&&typeof r!="string")throw TypeError("Illegal str: Not a string");var a=new c(R.calculateUTF16asUTF8(x(r),!0)[1],e,t),s=0;return R.encodeUTF16toUTF8(x(r),function(u){a.view[s++]=u}),a.limit=s,a},c})}(Cr)),Cr.exports}var et=rt(),tt=Xe(et);class it{constructor(){er(this,"module");er(this,"generator");er(this,"seed",0n);er(this,"dimension",0);er(this,"tileSize",64);er(this,"versionMajor",1);er(this,"versionMinor",20);er(this,"versionPatch",1);er(this,"library",0);er(this,"largeBiomes",!1);er(this,"datapackRevision",0);er(this,"biomeTreeUrl")}recreateGenerator(){if(!this.module)throw new Error("SeedmapGenerator was not initialized");this.generator&&(this.generator.delete(),this.generator=void 0),this.datapackRevision=0,this.biomeTreeUrl=void 0,this.generator=new this.module.SmGenerator(this.seed,this.tileSize,this.library,this.versionMajor,this.versionMinor,this.versionPatch,this.dimension,this.largeBiomes&&this.library==0)}getDatapackRevision(){return this.datapackRevision}getBiomeTreeUrl(){return this.biomeTreeUrl}setDatapack(y,c){var p,U;this.datapackRevision=c,((p=this.generator)==null?void 0:p.GetDatapackBuffer(y.length)).set(y),(U=this.generator)==null||U.InitDatapackBiomeNoise()}setBiomeTree(y,c){var p,U;this.biomeTreeUrl=c,((p=this.generator)==null?void 0:p.GetBiomeTreeBuffer(y.length)).set(y),(U=this.generator)==null||U.InitBiomeTree()}configure(y,c,l,p,U,x,A,V){!this.generator||this.tileSize!=c||this.library!=l||this.versionMajor!=p||this.versionMinor!=U||this.versionPatch!=x||this.dimension!=A||this.largeBiomes!=V?(this.seed=y,this.tileSize=c,this.library=l,this.versionMajor=p,this.versionMinor=U,this.versionPatch=x,this.dimension=A,this.largeBiomes=V,this.recreateGenerator()):this.seed!=y&&this.setSeed(y)}setHighlighterStyles(y){if(!this.generator)return;const c=this.generator.GetHighlighterStyles(y.length),l=new tt(c.length,!0);for(const U of y){l.writeInt32(U.circles.length);for(let x=0;x<8;x++)if(x<U.circles.length){const A=U.circles[x];l.writeInt32(A.size),l.writeInt32(A.offset),l.writeInt32(A.size*256+A.offset),l.writeUint32(A.color)}else l.writeInt32(0),l.writeInt32(0),l.writeInt32(0),l.writeUint32(0)}const p=new Uint8Array(l.buffer.slice(0,l.offset));c.set(p)}setColors(y){if(this.generator)for(let c=0;c<y.length;c++){const l=y[c];this.generator.SetBiomeColor(c,l>>16&255,l>>8&255,l&255)}}setSeed(y){this.generator&&(this.generator.SetSeed(y),this.seed=y)}async findSeed(y,c,l,p,U,x,A){if(l.length==0&&(p=0),U.length==0&&(x=0),p<=0&&x<=0||!this.generator)return null;let B=performance.now();if(p>0){const R=this.generator.GetFinderBiomes(l.length+1);for(let r=0;r<l.length;r++)R[r]=l[r];R[l.length]=-1}if(x>0){const R=this.generator.GetFinderStructures();for(let r=0;r<U.length;r++)R[r]=U[r];R[U.length]=255}let N=0;for(;;){if(this.setSeed(y),N++,(x<=0||this.generator.HasStructures(x))&&(p<=0||this.generator.HasBiomes(p,c)))return await A(N),y;if(Math.abs(performance.now()-B)>500&&(B=performance.now(),!await A(N)))return null;y++}return null}getBiomeAt(y,c,l){return this.generator.GetBiomeAt(y,c,l)}generateBiomeImage(y,c,l,p,U,x,A,V,B,N,R,r,e,t){if(A||B){const f=this.generator.GetHighlightedBiomes(e);for(let m=0;m<=e;m++)f[m]=N.indexOf(m)>=0?1:0;for(let m=0;m<=e;m++)R.indexOf(m)>=0&&(f[m]=2);this.generator.SetFadeColor(r)}const a=this.generator.GenerateBiomeImage(y,c,l,p,U==jr.Stepped?this.module.ShaderKind.STEPPED:U==jr.Simple?this.module.ShaderKind.SIMPLE:this.module.ShaderKind.NONE,x==le.Simple?this.module.ContourKind.SIMPLE:this.module.ContourKind.NONE,A,V,B,t),u=new Uint8Array(a).buffer;return ue(u,[u])}getStructuresAt(y,c,l,p,U){const x=this.generator.GetStructuresAt(y,c,l,p,U);return new Int32Array(x)}getBEStrongholdsAt(y,c,l,p){const U=this.generator.GetBEStrongholdsAt(y,c,l,p);return new Int32Array(U)}getStrongholds(){const y=this.generator.GetStrongholds();return new Int32Array(y)}getSpawn(){const y=this.generator.GetSpawn();return new Int32Array(y)}async initialize(y){this.module=await Ye({locateFile(){return y}})}}const nt=new it;zr(nt)})();
